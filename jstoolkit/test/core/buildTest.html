<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <script src="../../lib/jquery-1.3.2.js"></script>
  <script src="../testrunner.js"></script>
  <script src="../../build/js/CF_full_min.js"></script>
  <link rel="stylesheet" href="../testsuite.css" type="text/css" media="screen" />
  <script>

jQuery(function ()
{
	test("CF.build selector defaults to div", function (){
		expect(1);
		var elem1 = CF.build();
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(tgt.html(), "<div></div>");
	})
	
	test("CF.build selector nodeType", function (){
		expect(1);
		var elem1 = CF.build("div");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(tgt.html(), "<div></div>");
	});
	
	test("CF.build selector with class set css style", function (){
		expect(2);
		var elem1 = CF.build("span.cool");
		var tgt = CF.build("div");
		tgt.append(elem1);
		ok(elem1.hasClass("cool"));
		equals(tgt.html(), "<span class=\"cool\"></span>");
	});
	
	test("CF.build selector with multiple classes set css style", function (){
		expect(3);
		var elem1 = CF.build("span.cool.rad");
		var tgt = CF.build("div");
		tgt.append(elem1);
		ok(elem1.hasClass("cool"));
		ok(elem1.hasClass("rad"));
		equals(tgt.html(), "<span class=\"cool rad\"></span>");
	});	
	
	test("CF.build selector with id set css style", function (){
		expect(2);
		var elem1 = CF.build("span#nice");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("id"), "nice");
		equals(tgt.html(), "<span id=\"nice\"></span>");
	});
	
	test("CF.build selector with attr set css style", function (){
		expect(2);
		var elem1 = CF.build("span[foo=bar]");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(tgt.html(), "<span foo=\"bar\"></span>");
	});
	
	test("CF.build selector with attr set css style", function (){
		expect(2);
		var elem1 = CF.build("span[foo=bar][this=that]");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(elem1.attr("this"), "that");
	});
	
	test("CF.build selector with class, id, attr set css style", function (){
		expect(5);
		var elem1 = CF.build("span#nice.cool.rad[foo=bar]");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(elem1.attr("id"), "nice");
		ok(elem1.hasClass("cool"));
		ok(elem1.hasClass("rad"));
		equals(elem1.get(0).tagName.toLowerCase(), "span");
	});
	
	test("CF.build unset selector type results in div", function (){
		expect(5);
		var elem1 = CF.build("#nice.cool.rad[foo=bar]");
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(elem1.attr("id"), "nice");
		ok(elem1.hasClass("cool"));
		ok(elem1.hasClass("rad"));
		//can't use .html(), order of attributes is nondeterministic
		equals(elem1.get(0).tagName.toLowerCase(), "div");
	});
	
	test("CF.build add attributes via object", function (){
		expect(2);
		var elem1 = CF.build("span", {foo:"bar"});
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(tgt.html(), "<span foo=\"bar\"></span>");
	});
	
	test("CF.build add attributes via object and selector", function (){
		expect(2);
		var elem1 = CF.build("span[this=that]", {foo:"bar"});
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(elem1.attr("this"), "that");
	});
	
	test("CF.build add attributes via selector trumps same attribute from object", function (){
		expect(3);
		var elem1 = CF.build("span[this=that][flux=rad]", {foo:"bar", "this":"theother"});
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("foo"), "bar");
		equals(elem1.attr("flux"), "rad");
		equals(elem1.attr("this"), "that");
	});
	
	test("CF.build add classname via selector adds to className from object", function (){
		expect(2);
		var elem1 = CF.build("span.rad", {"class":"cool"});
		var tgt = CF.build("div");
		tgt.append(elem1);
		ok(elem1.hasClass("rad"));
		ok(elem1.hasClass("cool"));
	});
	
	test("CF.build add id via selector trumps id from object", function (){
		expect(2);
		var elem1 = CF.build("span#sweet", {id:"neat"});
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(elem1.attr("id"), "sweet");
		equals(tgt.html(), "<span id=\"sweet\"></span>");
	});
	
	test("CF.build add children with no attributes", function (){
		expect(1);
		var elem1 = CF.build("span", [CF.build("div"), "cool"]);
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(tgt.html(), "<span><div></div>cool</span>");
	});
	
	test("CF.build add children with attributes object", function (){
		expect(1);
		var elem1 = CF.build("span", {nice:"test"}, [CF.build("div"), "cool"]);
		var tgt = CF.build("div");
		tgt.append(elem1);
		equals(tgt.html(), "<span nice=\"test\"><div></div>cool</span>");
	});
	
});
	
  </script>
	
</head>
<body>
  
 <h1>CF.build Tests</h1>
 <h2 id="banner"></h2>
 <h2 id="userAgent"></h2>

 <ol id="tests"></ol>

 <div id="main"></div>
 
 
 
 
</body>
</html>